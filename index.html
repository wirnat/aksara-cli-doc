<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
<!-- <link href="assets/images/favicon.png" rel="icon" /> -->
<title>Axara Documentation</title>
<meta name="description" content="Smart Code Generator">
<meta name="author" content="https://wirnat.github.io/letter-from-wira/">

<!-- Stylesheet
============================== -->
<!-- Bootstrap -->
<link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css" />
<!-- Font Awesome Icon -->
<link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css" />
<!-- Magnific Popup -->
<link rel="stylesheet" type="text/css" href="assets/vendor/magnific-popup/magnific-popup.min.css" />
<!-- Highlight Syntax -->
<link rel="stylesheet" type="text/css" href="assets/vendor/highlight.js/styles/github.css" />
<!-- Custom Stylesheet -->
<link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css" />
</head>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125">

<!-- Preloader -->
<div class="preloader">
  <div class="lds-ellipsis">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
<!-- Preloader End --> 

<!-- Document Wrapper   
=============================== -->
<div id="main-wrapper"> 
  
  <!-- Header
  ============================ -->
  <header id="header" class="sticky-top"> 
    <!-- Navbar -->
    <nav class="primary-menu navbar navbar-expand-lg navbar-dropdown-dark">
      <div class="container-fluid">
        <!-- Sidebar Toggler -->
		<button id="sidebarCollapse" class="navbar-toggler d-block d-md-none" type="button"><span></span><span class="w-75"></span><span class="w-50"></span></button>
		
		<!-- Logo --> 
    <a class="logotxt ml-md-3" href="index.html" title="iDocs Template"><h4 class="logotxt">Axara</h4> </a> 
		<span class="text-2 ml-2">v1.1.0</span> 
        <!-- Logo End -->
        
		<!-- Navbar Toggler -->
		<button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#header-nav"><span></span><span></span><span></span></button>
        
		<!-- <div id="header-nav" class="collapse navbar-collapse justify-content-end">
          <ul class="navbar-nav">
            <li class="dropdown"> <a class="dropdown-toggle" href="#">Dropdown</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#">Dropdown Action</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="index.html">Action</a></li>
                    <li><a class="dropdown-item" href="feature-header-dark.html">Another Action</a></li>
                    <li><a class="dropdown-item" href="feature-header-primary.html">Something Else Here</a></li>
                    <li><a class="dropdown-item" href="index-2.html">Another Link</a></li>
                  </ul>
                </li>
                <li><a class="dropdown-item" href="#">Another Action</a>
                <li><a class="dropdown-item" href="#">Something Else Here</a></li>
              </ul>
            </li>
            <li><a target="_blank" href="https://themeforest.net/user/harnishdesign/portfolio?ref=HarnishDesign">Other Template</a></li>
            <li><a target="_blank" href="https://themeforest.net/user/harnishdesign/#contact?ref=HarnishDesign">Support</a></li>
          </ul>
        </div>
        <ul class="social-icons social-icons-sm ml-lg-2 mr-2">
          <li class="social-icons-twitter"><a data-toggle="tooltip" href="http://www.twitter.com/harnishdesign/" target="_blank" title="" data-original-title="Twitter"><i class="fab fa-twitter"></i></a></li>
          <li class="social-icons-facebook"><a data-toggle="tooltip" href="http://www.facebook.com/harnishdesign/" target="_blank" title="" data-original-title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
          <li class="social-icons-dribbble"><a data-toggle="tooltip" href="http://www.dribbble.com/harnishdesign/" target="_blank" title="" data-original-title="Dribbble"><i class="fab fa-dribbble"></i></a></li>
        </ul>
      </div> -->
    </nav>
    <!-- Navbar End --> 
  </header>
  <!-- Header End --> 
  
  <!-- Content
  ============================ -->
  <div id="content" role="main">
    
	<!-- Sidebar Navigation
	============================ -->
	<div class="idocs-navigation bg-light">
      <ul class="nav flex-column ">
        <li class="nav-item"><a class="nav-link active" href="#idocs_start">Getting Started</a>
          <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#idocs_installation">Installation</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_quick_example">Quick Example</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#idocs_feature">How it's work</a>
          <ul class="nav flex-column">
			<li class="nav-item"><a class="nav-link" href="#idocs_meta">Meta</a></li>
			<li class="nav-item"><a class="nav-link" href="#idocs_template">Template</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#idocs_templates">More Templates</a></li>
		<li class="nav-item"><a class="nav-link" href="#idocs_changelog">Changelog</a>
			<ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#v1-1">v1.1</a></li>
            <li class="nav-item"><a class="nav-link" href="#v1-0">v1.0</a></li>
          </ul>
		</li>
      </ul>
    </div>
    
    <!-- Docs Content
	============================ -->
    <div class="idocs-content">
      <div class="container"> 
        
        <!-- Getting Started
		============================ -->
        <section id="idocs_start">
        <h1>Documentation</h1>
        <h2>Axara CLI</h2>
        <p class="lead">Speed Up your coding process with Smart Code Generator.</p>
		<hr>
		<div class="row">
			<div class="col-sm-6 col-lg-4">
				<ul class="list-unstyled">
					<li><strong>Doc for Version:</strong> 1.1.0</li>
					<li><strong>Author:</strong> <a href="https://wirnat.github.io/letter-from-wira/" target="_blank">Wirnat</a></li>
				</ul>
			</div>
			<div class="col-sm-6 col-lg-4">
				<ul class="list-unstyled">
					<li><strong class="font-weight-700">Created:</strong> 9 October, 2022</li>
					<li><strong>Last Updated:</strong> 24 Maret, 2023</li>
				</ul>
			</div>
    <div class="col-sm-12">
      <p>Axara CLI is code generator that used to build repeatable code depend on the Model and Template. For example, If you work using architecture layer this tool will useful to help build your CRUD(create update delete) on repository, delivery, or usecase layer, even mocking an service or swagger documentation. So you can just focus to the business logic on the project. <br>
    </div>
		<!-- </div>
        <p class="alert alert-info">If you have any questions that are beyond the scope of this help file, Please feel free to email via <a target="_blank" href="https://themeforest.net/user/harnishdesign/#contact?ref=HarnishDesign">Item Support Page</a>.</p>
        </section>
         -->
		<hr class="divider">
		
        <!-- Installation
		============================ -->
        <div id="idocs_installation" class="col-lg-12 col-md-12">
          <h2>Installation</h2>
         <pre><code class="html">go install github.com/wirnat/axara@latest </code> </pre>
        </div>
        
		<hr class="divider">
		
        <!-- HTML Structure
		============================ -->
        <div id="idocs_quick_example" class="col-lg-12 col-md-12">
          <h2>Quick Example</h2>
          <p>Let's practices with a simple case, assume we want to create a CRUD for modules <i>company and customer</i>, but only in repository layer.</p>
          <p>First, prepare the models in <b>model</b> directory:</p>
          model/company.go
          <pre>
            <code>
package model

type Company struct {
  BaseModel
  Name string `json:"name"` //@meta validate:true
}

//@Register Company
              
            </code>
          </pre>
          model/customer.go
            <pre>
          <code>
package model

import "time"

type Customer struct {
  BaseModel
  Name      string     `json:"name"` //@meta validate:true
  BirthDate *time.Time `json:"birth_date"`
  Email     string     `json:"email"` //@meta validate:true
  Phone     string     `json:"phone"` //@meta validate:true
}

//@Register Customer            
</code>
</pre>
model/base_model.go

    <pre>
            <code>
package model

import (
	"time"
)

type BaseModel struct {
	ID        int64      `json:"id"`
	UUID      string     `json:"uuid"`
	CreatedAt time.Time  `json:"created_at"`
	UpdatedAt time.Time  `json:"updated_at"` //~ignore
	DeletedAt *time.Time `json:"deleted_at"` //~ignore
}

            </code>
          </pre>
          <p>Model work as backbone in this generator, if @Register comment is found in model, it will execute the model to the generator.</p>
          <hr>
          <p>Then, create a config yaml file <b>simple_crud.yaml</b></p>
          <p class="alert alert-info">You can use other name of config file if you want.</p>
          <pre>
            <code class="html">
key: ᬅᬓ᭄ᬱᬭ
model_path: model
module_name: gox
models:
  Customer:
    module: customer
  Company:
    module: company

meta:
  result_path: modules
  repository_dir: ~result_path~/~module~/repository
  repository_gorm_dir: ~result_path~/~module~/repository/gorm_repository
  template: templates
  import_model: ~module_name~/~model_path~
  import_repository: ~module_name~/repository

module_traits:
  - name: "~model_snake~ repository"
    dir: ~repository_dir~
    template: ~template~/repository.text
    file_name: "~model_snake~.g.go"
    active: true

  - name: "~model_snake~ repository gorm"
    dir: ~repository_gorm_dir~
    template: ~template~/repository_gorm.text
    file_name: "~model_snake~_gorm.g.go"
    active: true


            </code>
          </pre>
            This file will work as a configurator, generator and aggregator, so you must assign:
            <br>
            <b>key</b>, original key (ᬅᬓ᭄ᬱᬭ)
            <br>
            <b>model_path</b>, model directory 
            <br>
            <b>module_name</b>, the name of your project in go mod
            <br>
            <b>meta</b>, reusable variable that can used and decoded in config file or template file
            <br>
            <b>models</b>, declare model which will execute, and you can declare dynamic meta per model. in this example we add meta with key module and dynamic value 
            <br>
              <b>module_traits</b> is a file generator, it will generate file base on the template which assign in <b>template</b>. 
            <br>
             &nbsp <b>name</b>, is the name of action 
             <br>
             &nbsp <b>dir</b>, the location of generated file (it will auto generate folder)
             <br>
             &nbsp <b>file_name</b>, the name of generated file
             <br>
             &nbsp <b>meta</b>, is a custom meta variable that can called in template. <br>
          </p>
         </p>

          <p class="alert alert-info"> Module Trait will executed when the generator read the model that has @Register [Model]</p>
        
         <b>But how to use/decode Meta ?</b>
          <p>
            Axara CLI has default meta and can called in generator config file or in template file, but you can also add meta in config file or you can add meta in models (dynamic meta)
          </p>
          <p>
             In config file you can use <b>~meta name~</b> to make decode value to your config for more dynamic and readable.
            <br>
            <br>
            <hr>
            <p>Now let's create the template, at module_traits in config file we have declared 2 generate file, so we need create 2 template too.</p>
            <p>
              Template for interface repository file, templates/repository.text :
              <pre>
                <code>
package repository

import (
  "context"
  "{{.Meta.import_model}}"
  "time"
)

type {{.Model}} interface {
  Fetch(ctx context.Context, param Param) (res []model.{{.Model}}, err error)
  Show(ctx context.Context, param Param) (res model.{{.Model}}, err error)
  Update(ctx context.Context, param Param, update model.{{.Model}}) (err error)
  Store(ctx context.Context, store model.{{.Model}}) (err error)
  Delete(ctx context.Context, id int64) (err error)
}

type Param struct {
  {{- range $m:=.ModelFields }}
        {{$m.Name }} *{{$m.Type }} `json:"{{$m.Json -}}" form:"{{$m.Json }}" query:"{{$m.Json }}" {{if eq $m.Meta.validate "true"}}validate:"required"{{end}}`
    {{- end}}
}                  
                  

                </code>
              </pre>
            </p>
            <p>
              Template for repository implementation file, templates/repository_gorm.text:
              <pre>
                <code>
package gorm_repository

import (
  "context"
  "gorm.io/gorm"
  "{{.Meta.import_model}}"
  "{{.Meta.import_repository}}"
)

type {{.ModelCamel}}Gorm struct {
  gorm.DB
}

func New{{.Model}}Gorm(DB gorm.DB) *{{.ModelCamel}}Gorm {
  return &{{.ModelCamel}}Gorm{DB: DB}
}

func filter(db *gorm.DB, param repository.Param) {
  {{- range $m:=.ModelFields }}
      if param.{{$m.Name}} != nil {
        *db = *db.Where("{{$m.Json}}=?", *param.{{$m.Name -}})
        }
        {{- end}}
}

func (r {{.ModelCamel}}Gorm) Fetch(ctx context.Context, param repository.Param) (res []model.{{.Model}}, err error) {
  filter(&r.DB, param)
  err = r.DB.Find(&res).Error
  return
}

func (r {{.ModelCamel}}Gorm) Show(ctx context.Context, param repository.Param) (res model.{{.Model}}, err error) {
  filter(&r.DB, param)
  err = r.DB.First(&res).Error
  return
}

func (r {{.ModelCamel}}Gorm) Update(ctx context.Context, param repository.Param, update model.{{.Model}}) (err error) {
  filter(&r.DB, param)
  err = r.DB.Updates(&update).Error
  return
}

func (r {{.ModelCamel}}Gorm) Store(ctx context.Context, store model.{{.Model}}) (err error) {
  err = r.DB.Create(&store).Error
  return
}

func (r {{.ModelCamel}}Gorm) Delete(ctx context.Context, id int64) (err error) {
  err = r.DB.Where("id=?", id).Delete(&model.{{.Model}}{}).Error
  return
}
                  

                </code>
              </pre>
              Double curly bracket will call variable which declared by default in generator such as {{.Model}}, config file variable, or meta that's setted in config file.
            </p>
             Execute the generator by following command,<code class="html">axara generate [your config file] --models [execute models]</code>:
            <br>
           <br>
           <br>
            <pre><code class="html">axara generate simple_crud.yaml --models Customer,Company </code> </pre>
            <center>
              <img src="assets/images/ss10.png" alt="" srcset="">
              <br>
              <small>
                The result is a complete set of folders with files formed by the template
              </small>
            </center>
          </p>
        </div>
		<hr class="divider">
		        
		<!-- Sass
		============================ -->
        <section id="idocs_feature">
          <h2>How it's work?</h2>
          <p>
            Axara-cli works depend on template, model, and config file.
            <br>
            1. On start process generator will read config file.
            <br>
            2. Scan the model directory to find model that has @Register [model] in model file
            <br>
            3. Then module_traits in config file will execute template and, meta variable base on scanned model will decoded on this process.
          </p
        ></section>
		<!-- Color Schemes
		============================ -->
        <section id="idocs_meta">
          <h2>Meta</h2>
          <p>Meta is a variable that used for config and template file. Meta can be set from model file or config file.
          </p>
          <b>Model Meta</b>
         <p> To add meta base on model, you can declare model and add key value of meta</p>

          <pre>
            <code>
models:
  Customer:
    module: customer
    anything: hello world!
  Company:
    module: company
            </code>
          </pre>
          <div class="alert alert-info">Consider if you want to use variable base on model (scanned model turn), add meta from model is the best choice</div>
<br>
<b>Model Field Meta</b>
          <p>By default, every fields of model has stored to model_fields meta and can be used in template file,<br> but you also can add meta to every field when template is getting complicated.</p>
<pre>
  <code>
    type Branch struct {
      BaseModel
      CompanyID   int64   `json:"company_id"` //@meta validate:true
      Name        string  `json:"name"` //@meta validate:true
      Description *string `json:"description"`
    }
  </code>
</pre>
          <b>Static Meta</b>
          <p> You also can add meta from config file, by adding in meta, but keep in your mind meta must be unique</p>
           <pre>
             <code>
meta:
  result_path: modules
  repository_dir: ~result_path~/~module~/repository
  repository_gorm_dir: ~result_path~/~module~/repository/gorm_repository
  template: templates
  import_model: ~module_name~/~model_path~
  import_repository: ~module_name~/repository
             </code>
           </pre>
           <b>Meta Usage</b>
           <p>In config file you can call meta using <code>~[meta-name]~</code>, in template you can call meta using <code>{{.[meta-name]}}</code></p>
          <b>Default Meta</b>
          By Default, axara cli already generated meta for common use:
          <ul>
            <li><code>Model</code> - Name of scanned model</li>
            <li><code>ModelFields</code> - List of model fields, every field contains: <ul>
              <li>
               <code> Json</code> - string
              </li>
              <li>
               <code> Name </code> - string
              </li>
              <li>
               <code> Type</code> - string
              </li>
              <li>
               <code> IsPtr</code> - bool
              </li>
              <li>
               <code>Meta</code> -  map[string]interface{}
              </li>             
            </ul></li>
            <li><code>ModuleName</code> - Declared Module Name</li>
            <li><code>ResultPath</code> - Declared result path</li>
            <li><code>ModelPath</code> - Declared model path</li>
          </ul>
         
        <section id="idocs_template">
          <h2>Template</h2>
          <p>
            Main former of this generator is The Template, if config file serve as directory and architecture builder, template is the code builder. Template is compiled when all meta, variable, and config in json and model file has been compiled.
            <p>
              Template will be compiled using default template from <a href="https://pkg.go.dev/text/template">Template Go</a>, so you can use directive, variable call, and all feature of The Golang Template.
            </p> 
            <p>
              Here some template examples: 
            </p>
            <b>Loop and meta:</b>
            <pre>
              <code>
package {{.Meta.service}}_gorm

import (
	"{{.ModuleName}}/{{.ResultPath}}/{{.Meta.service}}/{{.Meta.service}}_request"
	"gorm.io/gorm"
)

func filter(db *gorm.DB, param {{.Meta.service}}_request.{{.Model}}Param) {
	{{- range $m:=.ModelFields }}
	if param.{{$m.Name}} != nil {
    db = db.Where("{{$m.Name}}", *param.{{$m.Name -}})
    }
    {{- end}}
}
              </code>
            </pre>
		
        
		<hr class="divider">
		
      </div>
    </div>
	
  </div>
  <!-- Content end --> 
  
  <!-- Footer
  ============================ -->
  <footer id="footer" class="section bg-dark footer-text-light">
    <div class="container">
      <ul class="social-icons social-icons-lg social-icons-muted justify-content-center mb-3">
        <li><a data-toggle="tooltip" href="https://twitter.com/harnishdesign/" target="_blank" title="" data-original-title="Twitter"><i class="fab fa-twitter"></i></a></li>
        <li><a data-toggle="tooltip" href="http://www.facebook.com/harnishdesign/" target="_blank" title="" data-original-title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
        <li><a data-toggle="tooltip" href="http://www.dribbble.com/harnishdesign/" target="_blank" title="" data-original-title="Dribbble"><i class="fab fa-dribbble"></i></a></li>
        <li><a data-toggle="tooltip" href="http://www.github.com/" target="_blank" title="" data-original-title="GitHub"><i class="fab fa-github"></i></a></li>
      </ul>
      <p class="text-center">Copyright &copy; 2020 <a href="http://www.harnishdesign.net/idocs-one-page-documentation-html-template/">iDocs</a>. All Rights Reserved.</p>
	  <p class="text-2 text-center mb-0">Design &amp; Develop by <a class="btn-link" target="_blank" href="http://www.harnishdesign.net/">HarnishDesign</a>.</p>
    </div>
  </footer>
  <!-- Footer end -->
  
</div>
<!-- Document Wrapper end --> 

<!-- Back To Top --> 
<a id="back-to-top" data-toggle="tooltip" title="Back to Top" href="javascript:void(0)"><i class="fa fa-chevron-up"></i></a> 

<!-- JavaScript
============================ -->
<script src="assets/vendor/jquery/jquery.min.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Highlight JS -->
<script src="assets/vendor/highlight.js/highlight.min.js"></script>
<!-- Easing --> 
<script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
<!-- Magnific Popup --> 
<script src="assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
<!-- Custom Script -->
<script src="assets/js/theme.js"></script>
</body>
</html>

<style>
 .logotxt {
    font-family: fantasy;
    padding-top: -6px;
    margin-bottom: 0px!important;
}
</style>